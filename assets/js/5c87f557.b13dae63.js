"use strict";(self.webpackChunkkomple_documentation=self.webpackChunkkomple_documentation||[]).push([[188],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>d});var i=r(7294);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t){if(null==e)return{};var r,i,s=function(e,t){if(null==e)return{};var r,i,s={},o=Object.keys(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var l=i.createContext({}),m=function(e){var t=i.useContext(l),r=t;return e&&(r="function"==typeof e?e(t):n(n({},t),e)),r},p=function(e){var t=m(e.components);return i.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},c=i.forwardRef((function(e,t){var r=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,p=a(e,["components","mdxType","originalType","parentName"]),c=m(r),d=s,f=c["".concat(l,".").concat(d)]||c[d]||u[d]||o;return r?i.createElement(f,n(n({ref:t},p),{},{components:r})):i.createElement(f,n({ref:t},p))}));function d(e,t){var r=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=r.length,n=new Array(o);n[0]=c;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:s,n[1]=a;for(var m=2;m<o;m++)n[m]=r[m];return i.createElement.apply(null,n)}return i.createElement.apply(null,r)}c.displayName="MDXCreateElement"},9063:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>l,contentTitle:()=>n,default:()=>u,frontMatter:()=>o,metadata:()=>a,toc:()=>m});var i=r(7462),s=(r(7294),r(3905));const o={},n="Permission Module",a={unversionedId:"komple-framework/modules/Permission-Module",id:"komple-framework/modules/Permission-Module",title:"Permission Module",description:"Permission Module is used to perform some actions - execute or query - in front of some of the operations.",source:"@site/docs/komple-framework/modules/07-Permission-Module.md",sourceDirName:"komple-framework/modules",slug:"/komple-framework/modules/Permission-Module",permalink:"/komple-framework/modules/Permission-Module",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Mint Module",permalink:"/komple-framework/modules/Mint-Module"},next:{title:"Token Module",permalink:"/komple-framework/modules/Token-Module"}},l={},m=[{value:"Related Permissions",id:"related-permissions",level:4},{value:"Permission Types",id:"permission-types",level:2},{value:"Permission Registry",id:"permission-registry",level:2},{value:"Removing Permissions",id:"removing-permissions",level:2},{value:"Permission Checks",id:"permission-checks",level:2}],p={toc:m};function u(e){let{components:t,...r}=e;return(0,s.kt)("wrapper",(0,i.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"permission-module"},"Permission Module"),(0,s.kt)("p",null,"Permission Module is used to perform some actions - execute or query - in front of some of the operations."),(0,s.kt)("p",null,"Instead of hard coding commonly used pieces of logic into every module that it will be utilized, this system allows the framework to call these features from different modules without effecting their code base."),(0,s.kt)("h4",{id:"related-permissions"},"Related Permissions"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/komple-framework/permissions/Attribute"},"Attribute Permission")," is utilized for comparing attributes of NFTs."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/komple-framework/permissions/Link"},"Link Permission")," is utilized for checking the link status of collections."),(0,s.kt)("li",{parentName:"ul"},(0,s.kt)("a",{parentName:"li",href:"/komple-framework/permissions/Ownership"},"Ownership Permission")," is utilized for checking the ownership of a user for a NFT.")),(0,s.kt)("h2",{id:"permission-types"},"Permission Types"),(0,s.kt)("p",null,"There are several types of official permissions available:"),(0,s.kt)("ul",null,(0,s.kt)("li",{parentName:"ul"},"Attribute Permission"),(0,s.kt)("li",{parentName:"ul"},"Link Permission"),(0,s.kt)("li",{parentName:"ul"},"Ownership Permission")),(0,s.kt)("p",null,"These permissions can be used in different modules for different purposes. More info is available in the related permission pages."),(0,s.kt)("h2",{id:"permission-registry"},"Permission Registry"),(0,s.kt)("p",null,"Just like in Hub Module, Permission Module also has a registery for storing different permissions."),(0,s.kt)("p",null,"Permission registry is a way of adding custom permissions without needing to change the core framework logic. These permissions must be registered before usage."),(0,s.kt)("p",null,"After successfully registering the new permission, it can be used just like other permissions. Permission module will relay the message to the correct contract based on the message and run permission checks."),(0,s.kt)("p",null,"Just like the official permissions, additional custom permissions can be registered too. See ",(0,s.kt)("a",{parentName:"p",href:"/komple-framework/permissions/Custom-Permissions"},"Custom Permissions")," to learn more about developing custom permissions."),(0,s.kt)("h2",{id:"removing-permissions"},"Removing Permissions"),(0,s.kt)("p",null,"When a permission is removed, it cannot be added back to the registry without registering it again. Because of this, it's important to make sure that the permission is not needed anymore before removing it."),(0,s.kt)("p",null,"After removing a permission, the execute messages on that permission will be locked and will not be callable anymore. Also the contract's admin will be set to ",(0,s.kt)("inlineCode",{parentName:"p"},"None")," to prevent any further changes."),(0,s.kt)("h2",{id:"permission-checks"},"Permission Checks"),(0,s.kt)("p",null,"Permission check message takes a ",(0,s.kt)("inlineCode",{parentName:"p"},"Binary")," parameter and decodes it to match the permissions."),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-rust"},"// msg is a Binary value\nlet data: Vec<PermissionCheckMsg> = from_binary(&msg)?;\n")),(0,s.kt)("p",null,"The ",(0,s.kt)("inlineCode",{parentName:"p"},"PermissionCheckMsg")," is a struct that contains the following fields:"),(0,s.kt)("pre",null,(0,s.kt)("code",{parentName:"pre",className:"language-rust"},"struct PermissionCheckMsg {\n    // Type of the permission\n    pub permission_type: String,\n    // Data that will be sent to the permission contract\n    pub data: Binary,\n}\n")),(0,s.kt)("admonition",{type:"danger"},(0,s.kt)("p",{parentName:"admonition"},"Permissions that will be used by a module must be set for that module before usage. If a permission is not set and that permission is sent along the permission check message, an error will be thrown.")),(0,s.kt)("p",null,"After decoding the message and making sure that the permissions are valid for that module, the execute messages for each of the permissions are created and sent to perform the checks."))}u.isMDXComponent=!0}}]);